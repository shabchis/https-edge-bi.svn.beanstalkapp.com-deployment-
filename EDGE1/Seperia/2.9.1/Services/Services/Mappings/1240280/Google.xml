<?xml version="1.0" encoding="utf-8" ?>	

<Mappings>
<Using Namespace="Edge.Data.Objects.{0}, Edge.Data.Pipeline"/>
<Object Type="Ad">

<Read Var="destUrl" Field='Destination URL' Regex='(\bsId=(?{edgetrackerid}\w+\{*[_-a-zA-Z0-9]*\}*))' Required='false'/>

<Read Var="destUrl2" Field='Destination URL' Regex='(\bsubId=(?{edgetrackerid}\w+\{*[_-a-zA-Z0-9]*\}*))' Required='false'/>

<Read Var="ad_id" Field='Ad ID' Required='false'/>

<Read Var="siteLink" Field='Attribute Values' Regex="(\bsubId=(?{tracker}\w+\{*[_-a-zA-Z0-9]*\}*))" Required='false'/>



<Map To='Segments[{GetSegment("Tracker")}]::SegmentObject' Condition='siteLink == null'>
 
<Map To='Value'  Value="No Tracker For Ad {ad_id}" Condition='destUrl == null &amp;&amp; destUrl2 == null &amp;&amp; siteLink == null' Required="false"/>
<Map To='OriginalID' Value="No Tracker For Ad {ad_id}" Condition='destUrl == null &amp;&amp; destUrl2 == null &amp;&amp; siteLink == null' Required="false"/>

<Map To='Value'  Value="{destUrl.edgetrackerid}" Condition='destUrl != null &amp;&amp;  destUrl.edgetrackerid.ToString()!="Sep100{creative}"' Required="false"/>
<Map To='Value'  Value="{destUrl2.edgetrackerid}" Condition='destUrl2 != null &amp;&amp;  destUrl2.edgetrackerid.ToString()!="Sep100{creative}"' Required="false"/>
<Map To='Value'  Value="Sep100{ad_id}" Condition='(destUrl2 != null &amp;&amp; destUrl2.edgetrackerid.ToString()=="Sep100{creative}") || (destUrl != null &amp;&amp; destUrl.edgetrackerid.ToString()=="Sep100{creative}") ' Required="false"/>

<Map To='OriginalID'  Value="{destUrl.edgetrackerid}" Condition='destUrl != null &amp;&amp;  destUrl.edgetrackerid.ToString()!="Sep100{creative}"' Required="false"/>
<Map To='OriginalID'  Value="{destUrl2.edgetrackerid}" Condition='destUrl2 != null &amp;&amp;  destUrl2.edgetrackerid.ToString()!="Sep100{creative}"' Required="false"/>
<Map To='OriginalID'  Value="Sep100{ad_id}" Condition='(destUrl2 != null &amp;&amp; destUrl2.edgetrackerid.ToString()=="Sep100{creative}") || (destUrl != null &amp;&amp; destUrl.edgetrackerid.ToString()=="Sep100{creative}") ' Required="false"/>

</Map>

<Map To='Segments[{GetSegment("Tracker")}]::SegmentObject' Condition='siteLink != null'>
<Map To='Value'  Value="{siteLink.tracker}" Condition='siteLink.tracker != null' Required="false"/>
<Map To='OriginalID'   Value="{siteLink.tracker}" Condition='siteLink.tracker != null' Required="false"/>
</Map>

</Object>
</Mappings>





